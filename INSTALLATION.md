# Tidy 安装和测试指南

## 📦 安装步骤

### 1. 下载扩展文件
确保您已经下载了所有扩展文件到本地目录。

### 2. 在 Chrome 中加载扩展

1. **打开 Chrome 扩展管理页面**
   - 方法一：在地址栏输入 `chrome://extensions/`
   - 方法二：点击右上角三点菜单 → 更多工具 → 扩展程序

2. **启用开发者模式**
   - 在扩展页面右上角，打开"开发者模式"开关

3. **加载未打包的扩展程序**
   - 点击"加载已解压的扩展程序"按钮
   - 选择包含 `manifest.json` 文件的项目根目录
   - 点击"选择文件夹"

4. **确认安装成功**
   - 扩展应该出现在扩展列表中
   - 浏览器工具栏会显示扩展图标 🌐

## 🔧 配置 API 密钥

### 支持的 AI 模型

1. **OpenAI GPT**
   - GPT-4: 需要 OpenAI API 密钥
   - GPT-3.5 Turbo: 需要 OpenAI API 密钥
   - 获取地址: https://platform.openai.com/api-keys

2. **Claude 3**
   - 需要 Anthropic API 密钥
   - 获取地址: https://console.anthropic.com/

3. **Google Gemini Pro**
   - 需要 Google AI Studio API 密钥
   - 获取地址: https://makersuite.google.com/app/apikey

### 配置步骤

1. 点击浏览器工具栏中的扩展图标
2. 在弹出窗口中选择AI模型
3. 展开"API 设置"部分
4. 输入对应的API密钥
5. 点击"测试"按钮验证连接
6. 配置源语言和目标语言

## 🧪 测试功能

### 1. 使用测试页面

1. 在浏览器中打开 `test.html` 文件
2. 按照页面中的测试说明进行操作

### 2. 基础功能测试

#### A. 整页翻译
1. 打开任意英文网页
2. 点击扩展图标，开启翻译开关
3. 点击"翻译当前页面"按钮
4. 检查页面是否显示双语内容

#### B. 选择翻译
1. 在网页上选中一段文本
2. 观察是否出现"翻译"按钮
3. 点击翻译按钮
4. 检查是否显示翻译弹窗

#### C. 右键菜单翻译
1. 选中网页上的文本
2. 右键点击，选择"翻译选中文本"
3. 检查翻译结果

#### D. 快捷键操作
1. 按 `Alt + A` 切换翻译状态
2. 按 `Alt + W` 翻译整个页面

#### E. 悬浮按钮
1. 观察页面右侧是否有悬浮的翻译按钮
2. 点击悬浮按钮测试功能

### 3. 高级功能测试

#### A. 翻译模式切换
1. 在扩展弹窗中切换"双语对照"和"替换原文"模式
2. 测试不同模式下的显示效果

#### B. 语言设置
1. 测试不同的源语言和目标语言组合
2. 验证自动检测功能

#### C. AI 模型切换
1. 测试不同的 AI 模型
2. 比较翻译质量差异

## 🐛 常见问题和解决方案

### 问题1: 扩展无法加载
**症状**: 在加载扩展时出现错误提示

**解决方案**:
1. 检查 `manifest.json` 文件格式是否正确
2. 确保所有必需文件都存在
3. 检查文件路径是否正确

### 问题2: API 测试失败
**症状**: 点击"测试"按钮显示API连接失败

**解决方案**:
1. 检查API密钥是否正确输入
2. 确认API密钥是否有效且有足够额度
3. 检查网络连接
4. 尝试使用自定义端点（如果有代理服务）

### 问题3: 翻译不显示
**症状**: 点击翻译按钮后没有反应

**解决方案**:
1. 检查浏览器控制台是否有错误信息
2. 确认扩展权限设置正确
3. 刷新页面重试
4. 检查API配置是否正确

### 问题4: 选择翻译按钮不出现
**症状**: 选中文本后没有翻译按钮

**解决方案**:
1. 确认翻译开关已启用
2. 选择的文本长度需要大于3个字符
3. 某些特殊页面可能受到CSP限制

### 问题5: 翻译质量不佳
**症状**: 翻译结果不准确或不自然

**解决方案**:
1. 尝试更换AI模型（推荐使用GPT-4）
2. 调整源语言设置，避免使用"自动检测"
3. 确保原文语言正确

## 📋 调试信息

### 查看控制台日志
1. 按 `F12` 打开开发者工具
2. 切换到 Console 标签
3. 查看是否有错误信息

### 查看扩展日志
1. 进入 `chrome://extensions/`
2. 找到 Tidy 扩展
3. 点击"检查视图 service worker"
4. 在控制台中查看后台脚本日志

### 检查存储数据
1. 在开发者工具中切换到 Application 标签
2. 左侧选择 Storage → Extension Storage
3. 查看扩展设置数据

## ✅ 功能检查清单

使用以下清单确保所有功能正常工作：

- [ ] 扩展成功安装并显示图标
- [ ] 弹出窗口能正常打开
- [ ] API 密钥配置成功
- [ ] API 连接测试通过
- [ ] 整页翻译功能正常
- [ ] 选择翻译功能正常
- [ ] 右键菜单翻译正常
- [ ] 快捷键响应正常
- [ ] 悬浮按钮显示和点击正常
- [ ] 双语对照模式正常
- [ ] 替换原文模式正常
- [ ] 翻译清除功能正常
- [ ] 不同语言组合测试通过
- [ ] 不同AI模型测试通过

## 🚀 性能优化建议

1. **API 使用优化**
   - 避免频繁翻译相同内容
   - 合理设置翻译批次大小
   - 监控API使用量

2. **浏览器性能**
   - 定期清理翻译缓存
   - 避免在大型页面上同时翻译大量内容
   - 关闭不需要的翻译功能

3. **网络优化**
   - 使用稳定的网络连接
   - 考虑使用API代理服务提高连接稳定性

## 📞 技术支持

如果遇到问题，请提供以下信息：

1. Chrome 浏览器版本
2. 操作系统版本
3. 扩展版本
4. 具体错误信息
5. 复现步骤
6. 控制台日志截图

---

**注意**: 这是一个测试版本的扩展，在生产环境中使用前请进行充分测试。